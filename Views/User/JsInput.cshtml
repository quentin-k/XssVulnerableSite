@model XssVulnerableSite.Models.JsInput;
@using System.Text.Encodings.Web;
@{
    ViewData["Title"] = "JS Inputs";
}

<div class="text-center">
    <div class="row">
        <div class="col-sm">
            <h1 id="colorResponse"></h1>
            <div class="row">
                <div class="col-md-12">
                    <form method="post">
                        <div asp-validation-summary="All" class="text-danger"></div>
                        <div class="form-group">
                            <input asp-for="FavoriteColor" class="form-control" placeholder="use the format of #ffffff" pattern="\x23[0-9a-fA-F]{6}"/>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>
                <script>
                    var color = "@Microsoft.Extensions.WebEncoders.Testing.JavaScriptTestEncoder.Default.Encode(Model.FavoriteColor)"
                    if (color == "" ) {
                        document.getElementById("colorResponse").innerText = "What is your favorite color?";
                    } else {
                        document.body.style.background = color;
                        document.getElementById("colorResponse").innerText = color + " is very cool!";
                    }
                </script>
            </div>
        </div>
    </div>
</div>
<a class="nav-link text-dark" asp-area="" asp-controller="User" asp-action="Index">Back to home</a>
